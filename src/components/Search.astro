---
---

<div id="search" class="pagefind-ui-container"></div>

<script is:inline>
  window.addEventListener('DOMContentLoaded', (event) => {
    // We only initialize if the element exists and PagefindUI is loaded
    // Note: Pagefind is a post-build tool, so this will only work in production/preview
    if (document.querySelector('#search') && typeof PagefindUI !== 'undefined') {
      new PagefindUI({ 
        element: "#search", 
        showSubResults: true,
        translations: {
          placeholder: "Search..."
        }
      });
    }
  });

  // Handle Astro View Transitions
  document.addEventListener('astro:page-load', () => {
    if (document.querySelector('#search') && typeof PagefindUI !== 'undefined') {
        // Clear existing to avoid double initialization if needed
        const searchEl = document.querySelector('#search');
        if (searchEl) searchEl.innerHTML = '';
        
        new PagefindUI({ 
            element: "#search", 
            showSubResults: true,
            translations: {
                placeholder: "Search..."
            }
        });
    }
  });
</script>

<style is:global>
  /* Customize Pagefind UI to match project theme */
  .pagefind-ui {
    --pagefind-ui-primary: darkgreen;
    --pagefind-ui-text: black;
    --pagefind-ui-background: white;
    --pagefind-ui-border: #e2e8f0;
    --pagefind-ui-tag: #f1f5f9;
    --pagefind-ui-border-radius: 12px;
    --pagefind-ui-font: inherit;
    --pagefind-ui-button: #005522;
    --pagefind-ui-scale: .65;
  }
 
  /* Make the search results an overlay */
  .pagefind-ui .pagefind-ui__drawer  {
      position: absolute !important;
      top: 100% !important;
      right: 0 !important;
      width: 400px !important;
      max-width: calc(100vw - 2rem) !important;
      background: white !important;
      border: 1px solid #e2e8f0 !important;
      border-radius: 16px !important;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
      margin-top: 0.75rem !important;
      padding: 1.25rem !important;
      max-height: 70vh !important;
      overflow-y: auto !important; */
      z-index: 1000 !important;
      color: black  !important;
  }
</style>


<!-- Standard Pagefind UI assets - these are generated into /pagefind/ after build -->
<!-- In dev mode, these will 404, which is expected -->
<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js" is:inline></script>
